---
id: task-220
title: Resolve Relationship with task-198 Unified Vulnerability Scanner
status: Done
assignee:
  - '@muckross'
created_date: '2025-12-03 01:58'
updated_date: '2025-12-28 20:18'
labels:
  - security
  - scanner
  - on-hold
dependencies: []
priority: high
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Determine integration strategy between /flow:security commands and task-198 (Trivy + Snyk scanner design). Decide if task-198 should be superseded, integrated, or remain separate.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
- [ ] #1 Review task-198 design document (once created)
- [ ] #2 Identify overlaps and gaps between /flow:security and Trivy+Snyk
- [ ] #3 Decision: Supersede, integrate, or keep separate with clear boundaries
- [ ] #4 Update task-198 or this PRD based on decision
- [ ] #5 Document decision in ADR if architectural
<!-- AC:END -->

## Implementation Plan

<!-- SECTION:PLAN:BEGIN -->
## Implementation Plan: Resolve Relationship with task-198

### Overview
Determine integration strategy between /flow:security (Semgrep SAST) and task-198 (Trivy + Snyk dependency/container scanning).

### Step-by-Step Implementation

#### Step 1: Review task-198 Design (1 hour)
1. Read task-198 documentation (once created)
2. Understand Trivy use case (container/dependency scanning)
3. Understand Snyk use case (dependency vulnerabilities)
4. Identify overlaps with Semgrep

#### Step 2: Analyze Tool Capabilities (2 hours)

Create comparison matrix:
| Tool | Type | Strength | Weakness |
|------|------|----------|----------|
| Semgrep | SAST | Code patterns, custom rules | No dependency scanning |
| CodeQL | SAST | Deep dataflow analysis | Large, slow, licensing |
| Trivy | Container/Dep | Fast, container images | No code analysis |
| Snyk | Dependency | Vuln database, fix PRs | Commercial license |

#### Step 3: Define Integration Architecture (2 hours)

**Recommendation**: Complementary, not overlapping

```yaml
# Security scanning architecture
/flow:security scan  # SAST (code analysis)
  - Semgrep: Code vulnerabilities
  - CodeQL: Advanced dataflow (optional)

/flow:security deps  # Dependency scanning (NEW, integrates task-198)
  - Trivy: Container images + dependencies
  - Snyk: Dependency vulnerabilities (optional)

/flow:security web   # DAST (task-222)
  - Playwright-based testing
```

All three produce unified finding format for triage/fix/audit.

#### Step 4: Document Decision in ADR (2 hours)
**File**: `docs/adr/ADR-006-security-tool-orchestration.md`

Sections:
1. Context: Multiple security tools needed
2. Decision: Complementary tools, unified interface
3. Consequences: Broader coverage, more dependencies
4. Alternatives considered

#### Step 5: Update PRD and Task-198 (1 hour)
1. Update this PRD to clarify scope (SAST only initially)
2. Update task-198 to show integration with /flow:security
3. Mark task-198 as v1.5 or v2.0 feature

### Dependencies
- task-198 design document

### Estimated Effort
**Total**: 8 hours (1 day)
<!-- SECTION:PLAN:END -->

## Implementation Notes

<!-- SECTION:NOTES:BEGIN -->
**ON HOLD (Dec 2025)**: Security scanning features may move to dedicated security repo.
<!-- SECTION:NOTES:END -->
