version: "1.0"
description: "Test workflow configuration"

states:
  - name: "Specified"
    description: "Feature specification created"
  - name: "Planned"
    description: "Technical plan created"
  - name: "In Implementation"
    description: "Feature being implemented"

workflows:
  specify:
    command: "/jpspec:specify"
    agents:
      - "product-requirements-manager"
    input_states:
      - "To Do"
    output_state: "Specified"
    description: "Create feature specification"
    optional: false

  plan:
    command: "/jpspec:plan"
    agents:
      - "software-architect"
      - "platform-engineer"
    input_states:
      - "Specified"
    output_state: "Planned"
    description: "Create technical plan"
    optional: false

  implement:
    command: "/jpspec:implement"
    agents:
      - "frontend-engineer"
      - "backend-engineer"
    input_states:
      - "Planned"
    output_state: "In Implementation"
    description: "Implement feature"
    optional: true

transitions:
  - from: "To Do"
    to: "Specified"
    via: "specify"
  - from: "Specified"
    to: "Planned"
    via: "plan"
  - from: "Planned"
    to: "In Implementation"
    via: "implement"
  - from: "In Implementation"
    to: "Done"
    via: "completion"

agent_loops:
  inner_loop:
    - "frontend-engineer"
    - "backend-engineer"
  outer_loop:
    - "product-requirements-manager"
    - "software-architect"
    - "platform-engineer"
    - "sre-agent"
